+++
title = "【草稿】概率论反思"
description = "概率论对现实的描述何以可能指导现实活动？概率论能多大程度地描述现实？"
date = 2025-04-12
updated = 2025-08-21

[extra]
math = true
toc = true

[extra.sitemap]
priority = "0.8"

[taxonomies]
categories = ["知识"]
tags = ["笔记", "数学", "概率论", "含模拟", "在线"]
+++

参考阅读
- 《概率论及其应用》，译自 William Feller 所作的经典 *An Introduction to Probability Theory and Its Application*
- 《概率论沉思录》

## 说明 {#about}
本文旨在探讨两个问题：
- 概率论对现实的描述何以可能指导现实活动？
    - 统计出的、计算出的概率为何合理？
    - 提出合理的假设何以可能？
- 概率论能多大程度地描述现实？
    - 当我们掷一个骰子时，我们何时把它看作每面 1/6 概率朝下而忽略材质的不均匀、抛掷的手法、空气的流动？
    - 我们应如何掌握这种判断的“把握”？

## 讨论的可能
### 必要的认可
第一个问题涉及了一个更基本的问题——认识论的问题。认识论不在本文讨论范围内。我们不希望陷入这样的问题：
- 使用的逻辑体系是否一定正确？
- 在推导过程中有多大的可能出错，而没有人发现？
- 我是真的理解了这些内容，还是我恰好产生了对它们的自信？

因此，希望读者认可：以某种方式，以概率论对现实的描述指导现实活动是可能的。为此，你或许可以采取以下选择：
- 盲信。时代、文化的变化已经塑造了（大部分时候）足以应对生活的直观认识。
    > 人类的集体直观能力也在进步着 … 同样，现在的学生不会体会到，当概率论还在萌芽的时候，它与某些思维方式、偏见及其他困难的斗争情形。
- 实用主义。概率论是一个（从经验上看/从权威上看/从自己对数学推导的认可上看）好用的模型。
    > 我们所关心的不是归纳推理的形态，而是一种可以叫作是*物理概率*或者*统计概率*的事物 … 我们所说的判断不是关于这些的判断，而是关于一个*理想实验*的可能结果 … 大家必须先承认一个特殊理想实验的想象模型。
- 其它可能的论证。如果你对形而上内容的了解可以支撑。

## 规则的构建
### 合情推理
假定需要开发一个推理机器人，对合情程度进行推理。我们希望满足如下条件：
1. 用实数表示合情程度。从直觉上说，我们需要全序和连续性。
2. 定性地与常识相符。例如说我们希望可以构成（广义的）布尔代数。
3. 推理是一致的。也就是：
    1. 不同的推理方式结果一致
    2. 会考虑所有有关的证据
    3. 在相同的情形下合情程度相同

### 定量规则
接下来推导出一些定量的规则：
1. 乘法规则。\
我们希望决定 $A\wedge B$ 为真有两种途径：先决定其一，在接受它的条件下接受另一个。从直觉上我们可以得出 $(C\implies A\wedge B) = F((C\implies B), (B\wedge C\implies A))$，同样地 $(D\implies A\wedge B\wedge C)$ 的一致性可推出 $F(F(x, y), z) = F(x, F(y, z))$；此外，$F$ 应当是连续且单调的。
Aczél 在他的函数方程著作中用 11 页推导出了方程的一般解。如果我们进一步要求可微性，则证明可缩短。解被表示为 $F(x, y) = \omega^{-1}(\omega(x)\omega(y))$

2. 值域。\
由乘法规则得出，确定性由 $\omega(Q) = 1$ 表示，进一步**约定** $0 \leq \omega(Q) \leq 1$

3. 加法规则。\
考虑那些非真即假的命题，$A\wedge \bar{A}$ 总是假的。通过分析得到 $\exists m>0, \omega^m(B\implies A)+\omega^m(B\implies \bar{A})$，使用代替 $p(x)\equiv\omega^m(x)$ 是符合值域条件的，没有丧失一般性。

4. 广义加法规则。\
由加法规则可进一步推导出 $p(C\implies A\vee B) = p(C\implies A) + p(C\implies B) - p(C\implies A\wedge B)$

下面将使用更简单的符号，用 $P|Q$ 表示 $Q\implies P$，用 $P+Q$ 表示 $P\vee Q$，用 $PQ$ 表示 $P\wedge Q$

实际上，我们的事实可以形如 $C\equiv A\implies B$，这同样可被恰当地赋值符合我们的体系。

我们假设 $B\equiv \left(p(A_iA_j | B) = p(A_i | B)\delta_{i, j}\right)$，其中 $\delta$ 是 Kronecker 符号。则有 $\sum_{i=1}^n p(A_i|B) = 1$，我们需要做的是将信息转换为 $p(A_i|B)$ 的值。

### 从观察到理论 {#from-observation}
这一过程需要理想化。
> 硬币掉下时不一定是正面朝上或反面朝上，它可能是滚掉了，也可能是笔直地站着，但是我们只承认正面和反面是扔硬币以后仅有的可能结果，这样一来，理论要简洁得多了，同时也不影响其应用，这种类型的理想化是实践中标准的处理办法。测定原子的寿命或人的寿命而没有误差是不可能的，但是为了理论上的目的，我们不妨设想寿命是实实在在的一个数，这样问题就产生了：什么样的数值能确实地代表一个人的寿命？有没有生命不可逾越的最大年龄？是否一切年龄都是可以设想的呢？一方面，谁也不认为人能活到一千岁；另一方面，现行的保险业务对于人的可能寿命却不加任何上限，按照寿险死亡率表所基于的公式算出来，千年不死的人在全人类中大约只占 $10^{10^{36}}$ 分之一，$10^{10^{36}}$ 这个数共含有 $10^{28}$ 亿个零，这个结论从生物学或社会学的角度看来，固然是毫无意义的，但是单纯从统计上着眼，它和经验当然没有什么矛盾，因为一个世纪内出生的人数还不到 $10^{10}$。要想用统计方法来检验上述说法，就需要 $10^{10^{35}}$ 个世纪以上的时间，而这个时间段比地球的寿命的 $10^{10^{34}}$ 倍还要大得多，毫无疑问，这样小的概率和我们心目中的“不可能性”是没有什么矛盾的。你也许认为，这种小概率的使用本身就是荒谬绝伦的，其实不然，使用这种小概率非但没有坏处，而且还可以简化公式，再说，如果我们真地把活一千年的可能性排除掉，我们势必承认一个最大年龄限 $x$ 的存在，说人能活 $x$ 年而不能活 $x$ 年零两秒，这种说法决不会比无限寿命的说法更能讲得通些。

把实验或观察的结果称作**事件**。分为复合事件与简单事件。

直观上，简单事件是不可分解的。这里我们不把将“摸到黑球”拆成“今天在下雨并且摸到了黑球”和“今天不在下雨并且摸到了黑球”视作“分解”——**我们约定简单事件是不作定义的。**

一个不可分解的结果用样本点表示，其全体称为**样本空间**。

我们用集合的语言来描述样本空间，**事件**为样本点的集合。

## 公理化 {#axiomatization}
与其它所有数学理论一样，概率论的公理化充满理想化的成分。

回顾 Kolmogorov 的公理化定义：

给定集合 $\Omega$，如果 $\mathfrak{F}\subset 2^\Omega$ 满足：
1. $\Omega\in\mathfrak{F}$
2. 取逆封闭：若 $A\in\mathfrak{F}$ 则

$$\bar{A}\in\mathfrak{F}$$

3. 可列并封闭：若 $\\{A_n\\}_{n\geq 1}\subset \mathfrak{F}$ 则

$$\bigcup\limits_{n=1}^{+\infty} A_n\in\mathfrak{F}$$

则称 $\mathfrak{F}$ 为 $\Omega$ 上的 σ-代数。

$\mathfrak{F}$ 上的概率 $P: 2^\Omega\to \mathbb{R}$ 满足
1. 非负：$P(A)\geq 0$
2. 规范性：$P(\Omega)=1$
3. 可列可加性：对 $\\{A_n\\}_{n\geq 1}$ 两两不交

$$P(\bigcup\limits_{n=1}^{+\infty} A_n) = \sum_{n=1}^{+\infty} P(A_n)$$

其余性质皆易导出。

## 离散样本空间
如果 $\Omega$ 是有限集，那么“可列”的要求完全涵盖了 $\mathfrak{F}$ 中的所有集合操作。

{{ todo() }}

## 频率学派和贝叶斯学派
### 比较
频率学派（Frequentist）和贝叶斯学派（Bayesian）是统计学中两大主要流派。

| 频率学派 | 贝叶斯学派 |
| :-: | :-: |
| 通过大量独立实验将概率解释为**统计均值** | 将概率解释为**信念度（degree of belief）** |
| 把未知参数看作普通变量（固定值），把样本看作随机变量 | 把一切变量看作随机变量 |
| 仅仅利用抽样数据 | 利用过去的知识和抽样数据 |

### 先验
频率学派与贝叶斯学派的最主要区别是，后者允许先验概率分布的使用。

先验概率和后验概率是贝叶斯统计的核心概念，用于描述在观察数据前后对某个事件或参数的信念（belief）变化。
- 先验概率（Prior Probability）是在未观测到数据之前，对某个参数（或假设）的主观或客观的初始概率估计。
- 后验概率（Posterior Probability）是在观测到数据之后，结合先验概率和数据信息（似然函数）更新得到的概率。

通过定义条件概率 $P(A\mid B) = \frac{P(A\cap B)}{P(B)}$ 可得到贝叶斯公式

$$P(\theta \mid \text{Data}) = \frac{P(\text{Data} \mid \theta) \cdot P(\theta)}{P(\text{Data})}$$

其中：
- $P(\text{Data} \mid \theta)$ 是似然函数（Likelihood），描述数据在给定参数下的概率。  
- $P(\theta)$ 是先验概率。  
- $P(\text{Data})$ 是边际概率。

### 存续
尽管贝叶斯学派的理论更为“丰富”且可以“包含”频率学派，后者仍被广泛应用。

特别是在于：
- 更为“保守”的领域，如医学试验，因为频率学派易于被接受。
- 大规模数据，因为易于计算。

## 典型问题
### 三门问题 {#three-door-problem}
这个问题最早在美国电视节目 Let's Make a Deal 中，由主持人 Monty Hall 推广。参赛者需从三扇门中选择一扇，背后可能是一辆汽车（大奖）或山羊（安慰奖）。主持人会打开一扇未被选择且藏有山羊的门，然后问参赛者是否要坚持原选择还是换门。

该问题以各种途径传播，引起了极大的争议。

[我们来做一次模拟。](/playground/simulation_three_door.html)

{% shell(text = "关于模拟的配置说明。") %}
模式选择：
- 自动重复
- 手动重复

随机源选择：
- 只支持默认随机源 `Math.random()`
    - 使用系统熵源
    - 随机算法取决于具体实现，如 [xorshift128+](https://github.com/v8/v8/blob/master/src/base/utils/random-number-generator.cc)，`pcg32` 及 `arc4random_buf`

过程选择：
- 方案一：虚拟主持人一开始就知晓门的对应，依此选择开哪个门
- 方案二：虚拟主持人一开始不知道门的对应，随机从未选的门挑，根据情况决定

{% end %}

这是一个典型的“反直觉”问题，通过上述模拟（或计算），可以发现换门则胜利频率为 $\frac{2}{3}$，否则为 $\frac{1}{3}$.

但是，存在一些基于直觉的不同意见：
- 换和不换同样是在两个门中选择，因此不论换和不换，结果都应该为 $\frac{1}{2}$。
    - 主持人的行为是存在约束的（即必须打开无车门），这在初始选对、选错时概率不一样。
    - 直观上可以理解为：把两个门合并成一个。

{{ todo() }}
