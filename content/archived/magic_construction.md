+++
title = "魔术的构造"
date = 2025-03-22
updated = 2025-03-23

[extra]
math = true
toc = true

[taxonomies]
categories = ["归档"]
tags = ["展示", "游戏", "离散"]
+++

打算加一个魔术鸽（一种经过人工培育的白斑鸠）的封面图，但是找不到好的。

这是一个长期维护的列表，用于存放精妙或有深刻背景的魔术/游戏构造。类似的内容在 Matrix67 的博客中应当很常见，但符合这一严格要求的应该不多。如果不能简单地完成讨论，则会单独成篇。

## 弱化的巴格拉斯效果 <完成构造>
本节讨论一个由[刘谦](https://space.bilibili.com/641975239)在 2018 M.E.E.T 表演的[魔术](https://www.bilibili.com/video/BV1hq4y1V7mj/)。

让我们先总结一下视频中发生了什么。尽量地客观来祛除 Misdirection 的作用。但具体语言从略。
1. <准备>
	1. 六位助手落座。
	2. 魔术师取出一副扑克牌，在桌面上摊开并点出其中前几张的数字花色，声称是「西班牙排序」。
	3. 声称因此可以进行「切牌」操作，而不能进行「洗牌」操作。
	4. 魔术师拿出布条，声称撕不开。助手帮助撕开的同时魔术师脱下外套。
	5. 拿出 Half Dollar，让助手检查其没有洞。
	6. 魔术师用布条蒙住双眼后让助手自由发挥蒙眼。
	7. 魔术师转身。
2. <第一轮>
	1. 魔术师通过指令让助手轮流进行切牌。
	2. 取出顶牌，为「红心2」。其被插入牌堆的随机位置。
	3. 魔术师拿到这堆牌，通过询问获知持有的面向，然后改为反面朝上。
	4. 魔术师一张张将最上方的牌放入另一只手中，停顿一段时间。
	5. 在某一刻，将牌归拢，缓慢地抽出一张，把剩余的放下。
	6. 示意这张牌是「红心2」。
3. <间幕>
	1. 魔术师把牌放下。（到口袋中？）
	2. 魔术师转身，边说话边对牌堆操作。（进行了两次切牌？）
	3. 魔术师声称之后不会再碰牌，让助手从牌堆中取出「红心2」丢掉。
	4. 魔术师把牌归拢。
4. <第二轮>
	1. 助手叫来一个观众 A，进行两次切牌。
	2. 魔术师询问 A 是否要再进行一次切牌，A 否定。
	3. A 独自观看顶牌，并插入随机位置。
	4. 魔术师让助手完成一系列操作，其中一些牌被抛到空中丢弃。
	5. 剩余的牌作一次双翻。
	6. 询问 A 得知选了「红桃8」。
	7. 询问助手知不是当前张，要求把双翻翻回来。
	8. 宣布当前张是正确的。

根据观察和相关分析，在这里给出一个构造。

需要观察到：
- 根据 `3.1` 与 `3.3` 推测，只有 26 张不同的牌，每张牌重复出现了两次。
- 在第一段魔术中，最后亮出的是第 26 张牌。
- 在第二段魔术中，最后亮出的是第 25 张牌。

有初始排序。
- 以 26 为周期，相隔 26 张牌的两张牌相同。
- 最上面几张牌的排列顺序和西班牙排列的开始几张相同。
- 最下面几张牌的排列顺序和西班牙排列的最后几张相同。

**第一个性质在「切牌」操作下会被保持。**

这样一来还剩下几个问题。
1. 取决于牌被插入上半部分还是下半部分，第一次只需在 26 与 27 张中选择。
	- 可能通过引导和心理常态让人插在下半部分。
	- 可能通过「烙焊」做记号。在部分牌角轻戳小孔，不戳穿但能够摸出来。
2. 这个构造可能被看出来。
	- 可能由大量的 Misdirection 解决。

## 盒子传输 <完成模型>
此想法来自对广为人知的两人情形（最早来源未知）的扩展；作为 [Mercury & Milfoil](https://foamworld.github.io/adventure/) 的一个谜题呈现。

**始态**
1. 有 n 人及 n 组互不相同的**锁-钥匙**。
2. 每人各有一把钥匙和一把锁。
3. 此外，一开始一人有一个空盒子。

**规则**
1. 盒子中可以放入任意多的钥匙或锁。
2. 盒子可以上任意多的锁（锁是两两独立的）。
3. 盒子只能在两人之间，在上锁状态下传递。

**要求**
1. 让一个指定的人获得盒子并能解开。
2. 让一个指定的人获得所有的钥匙和锁。

易证明，第二个要求除一种情况（每人初始的钥匙与锁都对应）外总可以完成。例子如下。

下表中大写字母表示锁；形如 `&(X)Y` 的序列表示盒子内部装有 `X`，有锁 `Y`

| 1 | 2 | 3 | 4 |
| :-: | :-: | :-: | :-: |
| `Ab`, `&` | `Ba` | `Cd` | `Dc` |
| `b`, `&()A` | `Ba` | `Cd` | `Dc` |
| `b` | `&(Aa)B` | `Cd` | `Dc` |
| `ab`, `&(B)A` |  | `Cd` | `Dc` |
| `ab` |  | `d`, `&(B)AC` | `Dc` |
| `Aab`, `&(B)C` |  | `d` | `Dc` |
| `Aab` |  | `d` | `&(BCc)D` |
| `Aab` |  | `&(CcDd)B` |  |
| `AaBbCcDd` |  |  |  |

## 华罗庚恒等式 <待设计>
利用 $aba = a-(a^{-1}+(b^{-1}-a)^{-1})^{-1}$。

设计难点：所有的有限除环都是域。
